(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76dda6f8"],{"4f85":function(t,s,a){"use strict";var i=a("8a5f"),o=a.n(i);o.a},"81a8":function(t,s,a){"use strict";a.r(s);var i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[t.post.content?a("video",{staticClass:"video",attrs:{poster:t.$axios.defaults.baseURL+t.post.cover[0].url,src:t.$axios.defaults.baseURL+t.post.content,controls:"controls"}},[t._v("您的浏览器不支持 video 标签。")]):t._e(),a("div",{staticClass:"main"},[a("div",{staticClass:"author"},[t._m(0),a("span",{staticClass:"follow",class:t.post.has_follow?"":"active",on:{click:t.handleFollow}},[t._v(t._s(t.post.has_follow?"已关注":"关注"))])]),a("h2",{staticClass:"title"},[t._v("如果关注是false，就加上active这个class")]),a("div",{staticClass:"actions"},[a("div",{staticClass:"actions-item",on:{click:t.handleLike}},[a("span",{staticClass:"iconfont icondianzan"}),a("i",[t._v(t._s(t.post.like_length))])]),t._m(1)])]),a("div",{staticClass:"footer"},[a("div",{staticClass:"comment-input"},[t._v("发布评论")]),a("div",{staticClass:"icons"},[a("span",{staticClass:"iconfont iconpinglun-"}),a("i",[t._v(t._s(t.post.comment_length>100?"99+":t.post.comment_length))])]),a("div",{staticClass:"icons",on:{click:t.handleStar}},[a("span",{staticClass:"iconfont iconshoucang",class:t.post.has_star?"active":""})]),t._m(2)])])},o=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"userinfo"},[a("img",{attrs:{src:"http://t12.baidu.com/it/u=2782147580,2038604057&fm=171&app=20&f=JPEG?w=700&h=395&s=1A15A14C147287DC065FA51A0300B09B",alt:""}}),a("span",[t._v("火星网友")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"actions-item"},[a("span",{staticClass:"iconfont iconweixin"}),a("i",[t._v("微信")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"icons"},[a("span",{staticClass:"iconfont iconfenxiang"})])}],n={data:function(){return{post:{user:{},cover:[{}]},token:""}},mounted:function(){var t=this,s=this.$route.params.id,a=JSON.parse(localStorage.getItem("userInfo"))||{},i=a.token;this.token=i;var o={url:"/post/"+s};this.token&&(o.headers={Authorization:i}),this.$axios(o).then((function(s){var a=s.data.data;t.post=a}))},methods:{handleFollow:function(){var t=this,s="";s=this.post.has_follow?"/user_unfollow/"+this.post.user.id:"/user_follows/"+this.post.user.id,this.$axios({url:s,headers:{Authorization:this.token}}).then((function(s){t.post.has_follow=!t.post.has_follow,t.$toast.success(s.data.message)}))},handleLike:function(){var t=this;this.$axios({url:"/post_like/"+this.post.id,headers:{Authorization:this.token}}).then((function(s){t.post.has_like=!t.post.has_like,t.post.has_like?t.post.like_length+=1:t.post.like_length-=1,t.$toast.success(s.data.message)}))},handleStar:function(){var t=this;this.$axios({url:"/post_star/"+this.post.id,headers:{Authorization:this.token}}).then((function(s){t.post.has_star=!t.post.has_star,t.$toast.success(s.data.message)}))}}},e=n,c=(a("4f85"),a("2877")),l=Object(c["a"])(e,i,o,!1,null,"fd0c7952",null);s["default"]=l.exports},"8a5f":function(t,s,a){}}]);
//# sourceMappingURL=chunk-76dda6f8.dbb22dae.js.map