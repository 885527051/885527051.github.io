{"version":3,"sources":["webpack:///./src/views/Video.vue?c9e4","webpack:///./src/views/Video.vue?7bb3","webpack:///src/views/Video.vue","webpack:///./src/views/Video.vue?e157","webpack:///./src/views/Video.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","post","staticClass","attrs","$axios","defaults","baseURL","cover","url","content","_v","_e","_m","class","has_follow","on","handleFollow","_s","handleLike","like_length","comment_length","handleStar","has_star","staticRenderFns","data","user","token","mounted","id","config","headers","Authorization","then","methods","component"],"mappings":"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","file":"js/chunk-76dda6f8.dbb22dae.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=0&id=fd0c7952&scoped=true&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=0&id=fd0c7952&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.post.content)?_c('video',{staticClass:\"video\",attrs:{\"poster\":_vm.$axios.defaults.baseURL + _vm.post.cover[0].url,\"src\":_vm.$axios.defaults.baseURL + _vm.post.content,\"controls\":\"controls\"}},[_vm._v(\"您的浏览器不支持 video 标签。\")]):_vm._e(),_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"author\"},[_vm._m(0),_c('span',{staticClass:\"follow\",class:_vm.post.has_follow ? '' : 'active',on:{\"click\":_vm.handleFollow}},[_vm._v(_vm._s(_vm.post.has_follow ? '已关注' : '关注'))])]),_c('h2',{staticClass:\"title\"},[_vm._v(\"如果关注是false，就加上active这个class\")]),_c('div',{staticClass:\"actions\"},[_c('div',{staticClass:\"actions-item\",on:{\"click\":_vm.handleLike}},[_c('span',{staticClass:\"iconfont icondianzan\"}),_c('i',[_vm._v(_vm._s(_vm.post.like_length))])]),_vm._m(1)])]),_c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"comment-input\"},[_vm._v(\"发布评论\")]),_c('div',{staticClass:\"icons\"},[_c('span',{staticClass:\"iconfont iconpinglun-\"}),_c('i',[_vm._v(_vm._s(_vm.post.comment_length > 100 ? \"99+\" :_vm.post.comment_length))])]),_c('div',{staticClass:\"icons\",on:{\"click\":_vm.handleStar}},[_c('span',{staticClass:\"iconfont iconshoucang\",class:_vm.post.has_star ? \"active\" :''})]),_vm._m(2)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"userinfo\"},[_c('img',{attrs:{\"src\":\"http://t12.baidu.com/it/u=2782147580,2038604057&fm=171&app=20&f=JPEG?w=700&h=395&s=1A15A14C147287DC065FA51A0300B09B\",\"alt\":\"\"}}),_c('span',[_vm._v(\"火星网友\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"actions-item\"},[_c('span',{staticClass:\"iconfont iconweixin\"}),_c('i',[_vm._v(\"微信\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"icons\"},[_c('span',{staticClass:\"iconfont iconfenxiang\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- poster 规定视频下载时显示的图像，或者在用户点击播放按钮前显示的图像。 -->\r\n    <video\r\n      v-if=\"post.content\"\r\n      :poster=\"$axios.defaults.baseURL + post.cover[0].url\"\r\n      :src=\"$axios.defaults.baseURL + post.content\"\r\n      controls=\"controls\"\r\n      class=\"video\"\r\n    >您的浏览器不支持 video 标签。</video>\r\n    <div class=\"main\">\r\n      <div class=\"author\">\r\n        <div class=\"userinfo\">\r\n          <img\r\n            src=\"http://t12.baidu.com/it/u=2782147580,2038604057&fm=171&app=20&f=JPEG?w=700&h=395&s=1A15A14C147287DC065FA51A0300B09B\"\r\n            alt\r\n          />\r\n          <span>火星网友</span>\r\n        </div>\r\n        <!-- 如果关注是false，就加上active这个class，显示一个红色按钮 -->\r\n        <span\r\n          class=\"follow\"\r\n          :class=\"post.has_follow ? '' : 'active'\"\r\n          @click=\"handleFollow\"\r\n        >{{post.has_follow ? '已关注' : '关注'}}</span>\r\n      </div>\r\n      <!-- 文章标题 -->\r\n      <h2 class=\"title\">如果关注是false，就加上active这个class</h2>\r\n      <!-- 按钮列表 -->\r\n      <div class=\"actions\">\r\n        <div class=\"actions-item\" @click=\"handleLike\">\r\n          <span class=\"iconfont icondianzan\"></span>\r\n          <!-- 点赞 -->\r\n          <i>{{post.like_length}}</i>\r\n        </div>\r\n        <div class=\"actions-item\">\r\n          <span class=\"iconfont iconweixin\"></span>\r\n          <i>微信</i>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 固定在底部的底部栏 -->\r\n    <div class=\"footer\">\r\n      <!-- 点击跳转到评论页 -->\r\n      <div class=\"comment-input\">发布评论</div>\r\n      <div class=\"icons\">\r\n        <span class=\"iconfont iconpinglun-\"></span>\r\n        <!-- 评论的条数,如果大于100的话就显示99+ -->\r\n        <i>{{post.comment_length > 100 ? `99+` :post.comment_length}}</i>\r\n      </div>\r\n      <!-- 如果当前是收藏的状态显示一个红色的按钮 -->\r\n      <div class=\"icons\" @click=\"handleStar\">\r\n        <!-- 如果当前是收藏的，就添加active这个class，显示一个红色的按钮 -->\r\n        <span class=\"iconfont iconshoucang\" :class=\"post.has_star ? `active` :''\"></span>\r\n      </div>\r\n      <!-- 这个按钮是一个装饰用的，微信分享需要企业的资质 -->\r\n      <div class=\"icons\">\r\n        <span class=\"iconfont iconfenxiang\"></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 文章的详情\r\n      post: {\r\n        user: {},\r\n        cover: [{}]\r\n      },\r\n      token: \"\"\r\n    };\r\n  },\r\n  mounted() {\r\n    // 获取文章的id\r\n    const { id } = this.$route.params;\r\n    const { token } = JSON.parse(localStorage.getItem(\"userInfo\")) || {};\r\n    // 保存一份到data\r\n    this.token = token;\r\n    const config = {\r\n      url: \"/post/\" + id\r\n    };\r\n    // 如果token有值给头信息加上token\r\n    if (this.token) {\r\n      config.headers = {\r\n        Authorization: token\r\n      };\r\n    }\r\n\r\n    // 请求文章的详情\r\n    this.$axios(config).then(res => {\r\n      // data是文章的详情\r\n      const { data } = res.data;\r\n      this.post = data;\r\n    });\r\n  },\r\n  methods: {\r\n    // 关注和取消关注\r\n    handleFollow() {\r\n      let url = \"\";\r\n      // 先判断当前的状态如果是关注，就取消关注\r\n      if (this.post.has_follow) {\r\n        // 取消关注\r\n        url = \"/user_unfollow/\" + this.post.user.id;\r\n      } else {\r\n        // 关注\r\n        url = \"/user_follows/\" + this.post.user.id;\r\n      }\r\n\r\n      this.$axios({\r\n        url,\r\n        headers: {\r\n          Authorization: this.token\r\n        }\r\n      }).then(res => {\r\n        // 关注成功之后修改关注状态\r\n        this.post.has_follow = !this.post.has_follow;\r\n        this.$toast.success(res.data.message);\r\n      });\r\n    },\r\n    // 文章点赞\r\n    handleLike() {\r\n      this.$axios({\r\n        url: \"/post_like/\" + this.post.id,\r\n        headers: {\r\n          Authorization: this.token\r\n        }\r\n      }).then(res => {\r\n        // 修改点赞的状态\r\n        this.post.has_like = !this.post.has_like;\r\n        // 判断当前是否点赞\r\n        if (this.post.has_like) {\r\n          // 如果是点赞就加1\r\n          this.post.like_length += 1;\r\n        } else {\r\n          // 取消点赞就减1\r\n          this.post.like_length -= 1;\r\n        }\r\n        // 弹窗提示\r\n        this.$toast.success(res.data.message);\r\n      });\r\n    },\r\n    // 收藏\r\n    handleStar() {\r\n      this.$axios({\r\n        url: \"/post_star/\" + this.post.id,\r\n        headers: {\r\n          Authorization: this.token\r\n        }\r\n      }).then(res => {\r\n        // 收藏状态取反\r\n        this.post.has_star = !this.post.has_star;\r\n        // 弹窗提示\r\n        this.$toast.success(res.data.message);\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.video {\r\n  width: 100%;\r\n  display: block;\r\n}\r\n\r\n.main {\r\n  padding: 10/360 * 100vw 20/360 * 100vw;\r\n}\r\n\r\n.author {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n\r\n  .userinfo {\r\n    display: flex;\r\n    align-items: center;\r\n    img {\r\n      width: 25/360 * 100vw;\r\n      height: 25/360 * 100vw;\r\n      border-radius: 50%;\r\n      // 被替换的内容在保持其宽高比的同时填充元素的整个内容框。如果对象的宽高比与内容框不相匹配，该对象将被剪裁以适应内容框。\r\n      object-fit: cover;\r\n      margin-right: 5px;\r\n    }\r\n  }\r\n  .active {\r\n    background: red;\r\n    border-color: red;\r\n    color: #fff;\r\n  }\r\n}\r\n.follow {\r\n  padding: 3px 10px;\r\n  border: 1px #999 solid;\r\n  border-radius: 50px;\r\n  font-size: 12px;\r\n}\r\n.title {\r\n  font-weight: normal; // 正常宽度\r\n  font-size: 16px;\r\n  margin: 10/360 * 100vw 0;\r\n}\r\n.actions {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 30/360 * 100vw;\r\n  padding: 0 30/360 * 100vw;\r\n  .actions-item {\r\n    display: flex;\r\n    align-items: center;\r\n    border: 1px #999 solid;\r\n    padding: 3px 10px;\r\n    border-radius: 50px;\r\n    font-size: 12px;\r\n    span {\r\n      margin-right: 5px;\r\n    }\r\n    .iconweixin {\r\n      color: #00c800;\r\n    }\r\n  }\r\n}\r\n.footer {\r\n  position: fixed;\r\n  width: 100%;\r\n  bottom: 0;\r\n  left: 0;\r\n  background: #fff;\r\n  padding: 10/360 * 100vw 20/360 * 100vw;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  .comment-input {\r\n    flex: 1;\r\n    margin-right: 20/360 * 100vw;\r\n    height: 30/360 * 100vw;\r\n    padding: 0 20/360 * 100vw;\r\n    line-height: 30/360 * 100vw;\r\n    border-radius: 50px;\r\n    background: #eee;\r\n  }\r\n  .icons {\r\n    position: relative;\r\n    margin: 0 8/360 * 100vw;\r\n    .iconfont {\r\n      font-size: 23px;\r\n    }\r\n    i {\r\n      position: absolute;\r\n      right: -10px;\r\n      top: -5px;\r\n      display: block;\r\n      padding: 1px 2px;\r\n      background: red;\r\n      color: #fff;\r\n      font-size: 10px;\r\n      line-height: 1;\r\n      border-radius: 50px;\r\n    }\r\n    .active {\r\n      color: red;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Video.vue?vue&type=template&id=fd0c7952&scoped=true&\"\nimport script from \"./Video.vue?vue&type=script&lang=js&\"\nexport * from \"./Video.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Video.vue?vue&type=style&index=0&id=fd0c7952&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fd0c7952\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}